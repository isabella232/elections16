{% extends '_card_base.html' %}

{% block card_content %}
<header>
    <h2>Race To The Nomination</h2>
    <h1>{{ party_long }} Delegate Tracker</h1>
</header>
<article>
    <h3 class="needed">{{ needed|comma }} needed to win</h3>
    <ul class="delegates {{ party_class }}">
        {% for candidate in candidates %}
        <li class="{{ candidate.slug() }}{% if not candidate.status() %} inactive {% endif %}">
            <div class="candidate">{{ candidate.last }}</div>
            <div class="bar-wrapper">
                <span class="bar previous" style="width: {{ candidate.previous_delegates_pct() }}%"></span>
                <span class="bar pickups" style="width: {{ candidate.new_delegates_pct() }}%"></span>
                <span class="amt">{{ candidate.delegates_count|comma  }}{% if candidate.d1 != 0 %}&nbsp;<span class="pickups">(+{{ candidate.d1 }})</span>{% endif %} {% if party == 'Dem' %}&nbsp;<span class="detail">({{ candidate.pledged_delegates_count() }} + {{ candidate.superdelegates_count }})</span>{% endif %}</span>
            </div>
        </li>
        {% endfor %}
    </ul>

    <ul class="key">
        <!-- <li class="key-item dels">
            <b></b>
            <label>Pledged delegates</li>
        </li> -->
        <li class="key-item pickups">
            <b></b>
            <label>New pickups</li>
        </li>
    </ul>

    <ul class="meta">
        {% if party == 'GOP' %}
        <li class="footnote">{{ COPY.meta.delegates_gop_footnote }}</li>
        {% elif party == 'Dem' %}
        <li class="footnote">{{ COPY.meta.delegates_dem_footnote }}</li>
        {% endif %}
        <li class="timestamp">As of {{ last_updated|ap_date }}, {{ last_updated|ap_time }} <span class="ap-period">{{ last_updated|ap_time_period }}</span> EST</li>
        <li>Source: AP estimates</li>
    </ul>

    <ul class="featured-links">
        <li><a href="http://www.npr.org/2016/03/02/468641509/elections-2016-democratic-and-republican-delegate-tracker">View Delegate Details</a></li>
    </ul>

</article>
{% endblock %}
